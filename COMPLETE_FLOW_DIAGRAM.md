# ğŸ“Š Complete Report Generator Flow - Visual Diagram

## ğŸ¯ End-to-End Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ADMIN USER                                   â”‚
â”‚                                                                      â”‚
â”‚  1. Opens Report Generator Page                                     â”‚
â”‚  2. Uploads JSON files (violations data)                            â”‚
â”‚  3. Selects Site Name from dropdown                                 â”‚
â”‚  4. Selects Report Date from date picker                            â”‚
â”‚  5. Enters Video Link (Google Drive)                                â”‚
â”‚  6. Clicks "Generate & Upload to Inferred Reports"                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REACT FRONTEND (Browser)                          â”‚
â”‚                                                                      â”‚
â”‚  Step 1: Upload JSON Files                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ for each JSON file:                                     â”‚        â”‚
â”‚  â”‚   â€¢ Read file content                                   â”‚        â”‚
â”‚  â”‚   â€¢ Parse JSON                                          â”‚        â”‚
â”‚  â”‚   â€¢ POST /api/report-generator/upload-json             â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                             â”‚                                        â”‚
â”‚                             â–¼                                        â”‚
â”‚  Step 2: Generate Report                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ POST /api/report-generator/generate                    â”‚        â”‚
â”‚  â”‚ Body: {                                                 â”‚        â”‚
â”‚  â”‚   video_link: "https://...",                           â”‚        â”‚
â”‚  â”‚   site_name: "CCL Mine Site A",                        â”‚        â”‚
â”‚  â”‚   report_date: "2026-02-25"                            â”‚        â”‚
â”‚  â”‚ }                                                       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   NODE.JS BACKEND (Port 8080)                        â”‚
â”‚                                                                      â”‚
â”‚  Route: /api/report-generator/upload-json                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ â€¢ Authenticate user (JWT)                               â”‚        â”‚
â”‚  â”‚ â€¢ Validate JSON data                                    â”‚        â”‚
â”‚  â”‚ â€¢ Forward to Python service                             â”‚        â”‚
â”‚  â”‚   POST http://localhost:5000/upload-json               â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                             â”‚                                        â”‚
â”‚                             â–¼                                        â”‚
â”‚  Route: /api/report-generator/generate                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ â€¢ Authenticate user (JWT)                               â”‚        â”‚
â”‚  â”‚ â€¢ Validate required fields                              â”‚        â”‚
â”‚  â”‚ â€¢ Forward to Python service                             â”‚        â”‚
â”‚  â”‚   POST http://localhost:5000/generate-report           â”‚        â”‚
â”‚  â”‚ â€¢ Receive PDF buffer                                    â”‚        â”‚
â”‚  â”‚ â€¢ Upload to Cloudinary â˜ï¸                              â”‚        â”‚
â”‚  â”‚ â€¢ Save to database ğŸ’¾                                   â”‚        â”‚
â”‚  â”‚ â€¢ Return success response                               â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                PYTHON FLASK SERVICE (Port 5000)                      â”‚
â”‚                                                                      â”‚
â”‚  Endpoint: POST /upload-json                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ â€¢ Receive JSON data                                     â”‚        â”‚
â”‚  â”‚ â€¢ Save to temp_reports/report_N.json                   â”‚        â”‚
â”‚  â”‚ â€¢ Return success                                        â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                             â”‚                                        â”‚
â”‚                             â–¼                                        â”‚
â”‚  Endpoint: POST /generate-report                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Step 1: Collect JSONs                                   â”‚        â”‚
â”‚  â”‚   â€¢ Read all files from temp_reports/                  â”‚        â”‚
â”‚  â”‚   â€¢ Parse each JSON                                     â”‚        â”‚
â”‚  â”‚                                                         â”‚        â”‚
â”‚  â”‚ Step 2: Combine Data                                    â”‚        â”‚
â”‚  â”‚   â€¢ Merge all violations                                â”‚        â”‚
â”‚  â”‚   â€¢ Add video link                                      â”‚        â”‚
â”‚  â”‚   â€¢ Prepare dataset                                     â”‚        â”‚
â”‚  â”‚                                                         â”‚        â”‚
â”‚  â”‚ Step 3: Generate PDF (report.py)                        â”‚        â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚        â”‚
â”‚  â”‚   â”‚ Page 1: Cover Page                       â”‚          â”‚        â”‚
â”‚  â”‚   â”‚   â€¢ Executive Summary                    â”‚          â”‚        â”‚
â”‚  â”‚   â”‚   â€¢ Site Info, Date, Drone ID           â”‚          â”‚        â”‚
â”‚  â”‚   â”‚   â€¢ Total Violations                     â”‚          â”‚        â”‚
â”‚  â”‚   â”‚   â€¢ Video Link (clickable)               â”‚          â”‚        â”‚
â”‚  â”‚   â”‚                                          â”‚          â”‚        â”‚
â”‚  â”‚   â”‚ Page 2: Analytics                        â”‚          â”‚        â”‚
â”‚  â”‚   â”‚   â€¢ Violation Frequency Chart ğŸ“Š         â”‚          â”‚        â”‚
â”‚  â”‚   â”‚   â€¢ Category Breakdown Table             â”‚          â”‚        â”‚
â”‚  â”‚   â”‚   â€¢ Risk Assessment                      â”‚          â”‚        â”‚
â”‚  â”‚   â”‚                                          â”‚          â”‚        â”‚
â”‚  â”‚   â”‚ Pages 3+: Evidence                       â”‚          â”‚        â”‚
â”‚  â”‚   â”‚   For each violation type:               â”‚          â”‚        â”‚
â”‚  â”‚   â”‚   â€¢ Download images from URLs            â”‚          â”‚        â”‚
â”‚  â”‚   â”‚   â€¢ Cache images locally                 â”‚          â”‚        â”‚
â”‚  â”‚   â”‚   â€¢ Add to PDF with:                     â”‚          â”‚        â”‚
â”‚  â”‚   â”‚     - Image (230x155px)                  â”‚          â”‚        â”‚
â”‚  â”‚   â”‚     - Alert ID                           â”‚          â”‚        â”‚
â”‚  â”‚   â”‚     - GPS Coordinates                    â”‚          â”‚        â”‚
â”‚  â”‚   â”‚     - Timestamp                          â”‚          â”‚        â”‚
â”‚  â”‚   â”‚                                          â”‚          â”‚        â”‚
â”‚  â”‚   â”‚ Final Page: Conclusion                   â”‚          â”‚        â”‚
â”‚  â”‚   â”‚   â€¢ Summary                              â”‚          â”‚        â”‚
â”‚  â”‚   â”‚   â€¢ Recommendations                      â”‚          â”‚        â”‚
â”‚  â”‚   â”‚   â€¢ Disclaimer                           â”‚          â”‚        â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚        â”‚
â”‚  â”‚                                                         â”‚        â”‚
â”‚  â”‚ Step 4: Compress PDF                                    â”‚        â”‚
â”‚  â”‚   â€¢ Original: ~15MB                                     â”‚        â”‚
â”‚  â”‚   â€¢ Compressed: ~3MB                                    â”‚        â”‚
â”‚  â”‚   â€¢ Using pikepdf library                               â”‚        â”‚
â”‚  â”‚                                                         â”‚        â”‚
â”‚  â”‚ Step 5: Cleanup                                         â”‚        â”‚
â”‚  â”‚   â€¢ Delete temp_reports/*.json                         â”‚        â”‚
â”‚  â”‚   â€¢ Keep image_cache for reuse                         â”‚        â”‚
â”‚  â”‚                                                         â”‚        â”‚
â”‚  â”‚ Step 6: Return PDF                                      â”‚        â”‚
â”‚  â”‚   â€¢ Stream PDF buffer to Node.js                       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLOUDINARY (Cloud Storage)                        â”‚
â”‚                                                                      â”‚
â”‚  Upload Process:                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ â€¢ Receive PDF buffer from Node.js                       â”‚        â”‚
â”‚  â”‚ â€¢ Store in folder: inferred-reports/ai-generated/      â”‚        â”‚
â”‚  â”‚ â€¢ Generate public URL                                   â”‚        â”‚
â”‚  â”‚ â€¢ Return:                                               â”‚        â”‚
â”‚  â”‚   - secure_url: https://res.cloudinary.com/...         â”‚        â”‚
â”‚  â”‚   - public_id: inferred-reports/ai-generated/AI_...    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATABASE (PostgreSQL/SQLite)                      â”‚
â”‚                                                                      â”‚
â”‚  Table: inferred_reports                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ INSERT INTO inferred_reports (                          â”‚        â”‚
â”‚  â”‚   filename,              -- AI_Report_1234567890.pdf   â”‚        â”‚
â”‚  â”‚   cloudinary_url,        -- https://res.cloudinary...  â”‚        â”‚
â”‚  â”‚   cloudinary_public_id,  -- inferred-reports/ai-gen... â”‚        â”‚
â”‚  â”‚   site_name,             -- CCL Mine Site A            â”‚        â”‚
â”‚  â”‚   department,            -- Admin                      â”‚        â”‚
â”‚  â”‚   uploaded_by,           -- User ID                    â”‚        â”‚
â”‚  â”‚   file_size,             -- 3145728 (3MB)              â”‚        â”‚
â”‚  â”‚   upload_date,           -- 2026-02-25                 â”‚        â”‚
â”‚  â”‚   hyperlink,             -- https://drive.google...    â”‚        â”‚
â”‚  â”‚   organization_id        -- 1                          â”‚        â”‚
â”‚  â”‚ )                                                       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SUCCESS RESPONSE                             â”‚
â”‚                                                                      â”‚
â”‚  Node.js â†’ Frontend:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ {                                                       â”‚        â”‚
â”‚  â”‚   success: true,                                        â”‚        â”‚
â”‚  â”‚   message: "Report generated and uploaded...",         â”‚        â”‚
â”‚  â”‚   document: {                                           â”‚        â”‚
â”‚  â”‚     id: 123,                                            â”‚        â”‚
â”‚  â”‚     filename: "AI_Report_1234567890.pdf",              â”‚        â”‚
â”‚  â”‚     cloudinary_url: "https://...",                     â”‚        â”‚
â”‚  â”‚     site_name: "CCL Mine Site A",                      â”‚        â”‚
â”‚  â”‚     upload_date: "2026-02-25"                          â”‚        â”‚
â”‚  â”‚   }                                                     â”‚        â”‚
â”‚  â”‚ }                                                       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                             â”‚                                        â”‚
â”‚                             â–¼                                        â”‚
â”‚  Frontend Actions:                                                  â”‚
â”‚  â€¢ Show success toast message âœ…                                    â”‚
â”‚  â€¢ Clear form fields                                                â”‚
â”‚  â€¢ Reset file list                                                  â”‚
â”‚  â€¢ User can now view report in Inferred Reports section            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INFERRED REPORTS SECTION                          â”‚
â”‚                                                                      â”‚
â”‚  Report appears in list:                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ S.No | File Name              | Site Name    | Date    â”‚        â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚        â”‚
â”‚  â”‚  1   | AI_Report_123...pdf    | CCL Mine A   | Feb 25  â”‚        â”‚
â”‚  â”‚      | [View] [Delete]        | ğŸ”— Video Link          â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                      â”‚
â”‚  User can:                                                          â”‚
â”‚  â€¢ Click [View] to open PDF in new tab                             â”‚
â”‚  â€¢ Click [Delete] to remove report (admin only)                    â”‚
â”‚  â€¢ Click video link to watch surveillance footage                  â”‚
â”‚  â€¢ Filter by site, date, or search by filename                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow Summary

```
JSON Files â†’ Python Service â†’ PDF Generation â†’ Compression
                                                    â†“
                                              Cloudinary Upload
                                                    â†“
                                              Database Save
                                                    â†“
                                           Inferred Reports List
```

## â±ï¸ Timeline

```
00:00 - User clicks "Generate & Upload"
00:01 - Upload JSON files (1-2 seconds)
00:03 - Python starts processing
00:05 - Download violation images
00:45 - Generate PDF pages with charts
01:30 - Compress PDF (15MB â†’ 3MB)
02:00 - Upload to Cloudinary
02:10 - Save to database
02:15 - Return success to frontend
02:20 - Show success message
02:25 - Report visible in Inferred Reports

Total: ~2-3 minutes
```

## ğŸ¯ Key Points

1. **No Manual Upload**: Report automatically goes to Inferred Reports
2. **Metadata Preserved**: Site, date, and video link all saved
3. **Cloud Storage**: PDF stored in Cloudinary for reliability
4. **Database Entry**: Searchable and filterable like other reports
5. **Organization Isolation**: Respects user's organization context
6. **Automatic Cleanup**: Temp files deleted after generation

## âœ… Success Criteria

- âœ… PDF generated with all violations
- âœ… PDF compressed to reasonable size
- âœ… Uploaded to Cloudinary successfully
- âœ… Database entry created
- âœ… Visible in Inferred Reports
- âœ… Video link clickable
- âœ… Correct site and date displayed
- âœ… Temp files cleaned up
